const tennisMocData = {
  "data": [
    {
      "marketCount": 13,
      "event": {
        "open_date": "Fri Jan 07 10:44:00 GMT 2022",
        "sport_id": "2",
        "sport_name": "Tennis",
        "timezone": "UTC",
        "countryCode": "AU",
        "match_id": "31160569",
        "series_name": "ATP Adelaide 2022",
        "match_name": "Set 03",
        "series_id": "12437605"
      }
    },
    {
      "marketCount": 8,
      "event": {
        "open_date": "Fri Jan 07 10:44:00 GMT 2022",
        "sport_id": "2",
        "sport_name": "Tennis",
        "timezone": "UTC",
        "countryCode": "AU",
        "match_id": "31160568",
        "series_name": "ATP Adelaide 2022",
        "match_name": "Set 02",
        "series_id": "12437605"
      }
    },
    {
      "marketCount": 3,
      "event": {
        "open_date": "Fri Jan 07 14:30:00 GMT 2022",
        "sport_id": "2",
        "sport_name": "Tennis",
        "timezone": "UTC",
        "countryCode": "US",
        "match_id": "31154109",
        "series_name": "UTR Naples Men's 2022",
        "match_name": "Velasquez Ariza v Ale Moreno",
        "series_id": "12437977"
      }
    },
    {
      "marketCount": 1,
      "event": {
        "open_date": "Fri Jan 07 12:03:05 GMT 2022",
        "sport_id": "2",
        "sport_name": "Tennis",
        "timezone": "GMT",
        "countryCode": "GB",
        "match_id": "31162867",
        "series_name": "ITF Egypt Futures",
        "match_name": "B Lock v D Klok",
        "series_id": "9663755"
      }
    },
    {
      "marketCount": 1,
      "event": {
        "open_date": "Fri Jan 07 12:05:07 GMT 2022",
        "sport_id": "2",
        "sport_name": "Tennis",
        "timezone": "GMT",
        "countryCode": "GB",
        "match_id": "31162866",
        "series_name": "ITF Egypt Futures",
        "match_name": "M Beauge v S Roncalli",
        "series_id": "9663755"
      }
    },
    {
      "marketCount": 3,
      "event": {
        "open_date": "Fri Jan 07 02:35:00 GMT 2022",
        "sport_id": "2",
        "sport_name": "Tennis",
        "timezone": "UTC",
        "match_id": "31161201",
        "series_name": "WTA Melbourne Summer Set 1 2022",
        "match_name": "Set 03",
        "series_id": "12438662"
      }
    },
    {
      "marketCount": 1,
      "event": {
        "open_date": "Fri Jan 07 11:12:22 GMT 2022",
        "sport_id": "2",
        "sport_name": "Tennis",
        "timezone": "GMT",
        "countryCode": "GB",
        "match_id": "31162961",
        "series_name": "ITF Spain Futures",
        "match_name": "A Bellier v D Rincon",
        "series_id": "9160746"
      }
    },
    {
      "marketCount": 7,
      "event": {
        "open_date": "Fri Jan 07 10:44:00 GMT 2022",
        "sport_id": "2",
        "sport_name": "Tennis",
        "timezone": "UTC",
        "countryCode": "AU",
        "match_id": "31160565",
        "series_name": "ATP Adelaide 2022",
        "match_name": "Kokkinakis v M Ymer",
        "series_id": "12437605"
      }
    },
    {
      "marketCount": 1,
      "event": {
        "open_date": "Fri Jan 07 10:22:37 GMT 2022",
        "sport_id": "2",
        "sport_name": "Tennis",
        "timezone": "GMT",
        "countryCode": "GB",
        "match_id": "31162804",
        "series_name": "ITF Cairo",
        "match_name": "M Tkacheva v R Sawayanagi",
        "series_id": "10479523"
      }
    },
    {
      "marketCount": 1,
      "event": {
        "open_date": "Fri Jan 07 11:22:45 GMT 2022",
        "sport_id": "2",
        "sport_name": "Tennis",
        "timezone": "GMT",
        "countryCode": "GB",
        "match_id": "31162868",
        "series_name": "ITF Cairo",
        "match_name": "L Tran v A Ureke",
        "series_id": "10479523"
      }
    },
    {
      "marketCount": 3,
      "event": {
        "open_date": "Fri Jan 07 10:47:00 GMT 2022",
        "sport_id": "2",
        "sport_name": "Tennis",
        "timezone": "UTC",
        "countryCode": "IT",
        "match_id": "31162186",
        "series_name": "Forli Challenger 2022",
        "match_name": "Benchetrit v M Sasikumar",
        "series_id": "12437753"
      }
    },
    {
      "marketCount": 4,
      "event": {
        "open_date": "Fri Jan 07 02:35:00 GMT 2022",
        "sport_id": "2",
        "sport_name": "Tennis",
        "timezone": "UTC",
        "match_id": "31161199",
        "series_name": "WTA Melbourne Summer Set 1 2022",
        "match_name": "Set 01",
        "series_id": "12438662"
      }
    },
    {
      "marketCount": 13,
      "event": {
        "open_date": "Fri Jan 07 10:47:00 GMT 2022",
        "sport_id": "2",
        "sport_name": "Tennis",
        "timezone": "UTC",
        "countryCode": "IT",
        "match_id": "31162190",
        "series_name": "Forli Challenger 2022",
        "match_name": "Set 03",
        "series_id": "12437753"
      }
    },
    {
      "marketCount": 4,
      "event": {
        "open_date": "Fri Jan 07 10:47:00 GMT 2022",
        "sport_id": "2",
        "sport_name": "Tennis",
        "timezone": "UTC",
        "countryCode": "IT",
        "match_id": "31162189",
        "series_name": "Forli Challenger 2022",
        "match_name": "Set 02",
        "series_id": "12437753"
      }
    },
    {
      "marketCount": 1,
      "event": {
        "open_date": "Fri Jan 07 10:40:19 GMT 2022",
        "sport_id": "2",
        "sport_name": "Tennis",
        "timezone": "GMT",
        "countryCode": "GB",
        "match_id": "31162880",
        "series_name": "ITF Tunisia Futures",
        "match_name": "T Deschamps v R Balzerani",
        "series_id": "9245107"
      }
    },
    {
      "marketCount": 1,
      "event": {
        "open_date": "Fri Jan 07 07:41:00 GMT 2022",
        "sport_id": "2",
        "sport_name": "Tennis",
        "timezone": "UTC",
        "countryCode": "AE",
        "match_id": "31156326",
        "series_name": "UTR Dubai Men's II 2022",
        "match_name": "Podzus v Sim Roberts",
        "series_id": "12438463"
      }
    },
    {
      "marketCount": 2,
      "event": {
        "open_date": "Fri Jan 07 11:15:00 GMT 2022",
        "sport_id": "2",
        "sport_name": "Tennis",
        "timezone": "Australia/Sydney",
        "countryCode": "AU",
        "match_id": "31163525",
        "series_name": "ATP Cup 2022",
        "match_name": "Martinez/Ramos Vinolas v Walkow/Zielinski",
        "series_id": "12437191"
      }
    }
  ],
  "success": true,
  "message": "Match List"
}

app.controller(
  "tennisController",
  function ($scope, $http, $cookieStore, $interval, $rootScope) {
    $rootScope.isCasinoPage = false;
    $("#tabMenu li a").removeClass("select");
    if (!$('a[href="#!Tennis"]').hasClass("select")) {
      $('a[href="#!Tennis"]').addClass("select");
      $rootScope.inplaydiv = false;
      $rootScope.mainfooter = false;
      if ($rootScope.sportsData) {
        $rootScope.TournamentList("2", "Tennis");
      }
    }

    $scope.fullScore = {};
    $rootScope.s_id = "2";
    $rootScope.fType = 1
    $scope.Highlightlist = [];
    $scope.oldHighlightlist = [];
    $("#loading_page").css("display", "grid");
    $scope.showtennisinter = false;
    $scope.showtennis = function () {
      $rootScope.getMatchDataFromWebSocket();
      $(".btn-lay").removeClass("spark");
      $(".btn-back").removeClass("spark");
      if ($scope.showtennisinter == false) {
        $scope.showtennisinter = true;
      }

      console.log($rootScope.fType, "$rootScope.fType")

      if ($rootScope.fType == 1) {
        // $http({
        //   url:
        //     "http://www.lcexchanges247.com/Client/BetClient.svc/Data/Highlights?sid=2",

        //   method: "GET",

        //   headers: {
        //     Token: authtoken,
        //   },
        // }).then(
        // function mySuccess(response) {
        console.log("success")
        $scope.showtennisinter = false;
        // console.log(response);
        // $scope.cricket = response.data.data;
        if (tennisMocData.data.length < 1) {
          $scope.shoNoEvents = true;
        } else {
          $scope.shoNoEvents = false;
        }
        $scope.Highlightlist = tennisMocData.data;

        $("#loading_page").css("display", "none");

        if ($scope.oldHighlightlist.length != $scope.Highlightlist.length) {
          $scope.oldHighlightlist = $scope.Highlightlist;
        }

        angular.forEach($scope.Highlightlist, function (item, index) {
          if (item.matchName == $scope.oldHighlightlist[index].matchName) {
            if (
              item.runner1Back != $scope.oldHighlightlist[index].runner1Back
            ) {
              $("#hback1_" + index).addClass("spark");
            }
            if (
              item.runner1Lay != $scope.oldHighlightlist[index].runner1Lay
            ) {
              $("#hlay1_" + index).addClass("spark");
            }
            if (
              item.runner2Back != $scope.oldHighlightlist[index].runner2Back
            ) {
              $("#hback2_" + index).addClass("spark");
            }
            if (
              item.runner2Lay != $scope.oldHighlightlist[index].runner2Lay
            ) {
              $("#hlay2_" + index).addClass("spark");
            }
            if (
              item.runner3Back != $scope.oldHighlightlist[index].runner3Back
            ) {
              $("#hback3_" + index).addClass("spark");
            }
            if (
              item.runner3Lay != $scope.oldHighlightlist[index].runner3Lay
            ) {
              $("#hlay3_" + index).addClass("spark");
            }
          }
        });
        $scope.oldHighlightlist = $scope.Highlightlist;

        // console.log($scope.cricket)
        // },
        //   function myError(error) {
        //     console.log("error")
        //     $scope.showtennisinter = false;
        //     if (error.status == 401) {
        //       // $.removeCookie("authtoken");
        //       // window.location.href="index.html"
        //     }
        //   }
        // );
      } else {
        $scope.showtennisinter = false;
        // console.log(response);
        // $scope.cricket = tennisMocData.data;

        $scope.Highlightlist = $rootScope.highlightwisedata(2);
        if ($scope.Highlightlist.length < 1) {
          $scope.shoNoEvents = true;
        } else {
          $scope.shoNoEvents = false;
        }

        $("#loading_page").css("display", "none");

        if ($scope.oldHighlightlist.length != $scope.Highlightlist.length) {
          $scope.oldHighlightlist = $scope.Highlightlist;
          $("#tabMenu li a").removeClass("select");
          if (!$('a[href="#!Tennis"]').hasClass("select")) {
            $('a[href="#!Tennis"]').addClass("select");
            $rootScope.inplaydiv = false;
            $rootScope.mainfooter = false;
            if ($rootScope.sportsData) {
              $rootScope.TournamentList("2", "Tennis");
            }
          }
        }

        angular.forEach($scope.Highlightlist, function (item, index) {
          if (item.matchName == $scope.oldHighlightlist[index].matchName) {
            if (
              item.runner1Back != $scope.oldHighlightlist[index].runner1Back
            ) {
              $("#hback1_" + index).addClass("spark");
            }
            if (item.runner1Lay != $scope.oldHighlightlist[index].runner1Lay) {
              $("#hlay1_" + index).addClass("spark");
            }
            if (
              item.runner2Back != $scope.oldHighlightlist[index].runner2Back
            ) {
              $("#hback2_" + index).addClass("spark");
            }
            if (item.runner2Lay != $scope.oldHighlightlist[index].runner2Lay) {
              $("#hlay2_" + index).addClass("spark");
            }
            if (
              item.runner3Back != $scope.oldHighlightlist[index].runner3Back
            ) {
              $("#hback3_" + index).addClass("spark");
            }
            if (item.runner3Lay != $scope.oldHighlightlist[index].runner3Lay) {
              $("#hlay3_" + index).addClass("spark");
            }
          }
        });
        $scope.oldHighlightlist = $scope.Highlightlist;
      }
    };

    var highlightTimer;
    if ($rootScope.authcookie) {
      var highlightTimer1 = $interval(() => {
        if (!$scope.Highlightlist.length) {
          $scope.Highlightlist = $rootScope.highlightwisedata(2);
        } else {
          $interval.cancel(highlightTimer1);
        }
      }, 500);
      highlightTimer = $interval(function () {
        $scope.showtennis();
      }, 10000);
    } else {
      highlightTimer = $interval(function () {
        $scope.showtennis();
      }, 1000 * 60);
      var highlightTimer1 = $interval(() => {
        if (!$scope.Highlightlist.length) {
          $scope.showtennis();
        } else {
          $interval.cancel(highlightTimer1);
        }
      }, 1000);
    }

    $scope.$on("$destroy", function () {
      $interval.cancel(highlightTimer);
    });
  }
);
