const SoccerMocData = {
  "data": [
    {
      "marketCount": 14,
      "event": {
        "open_date": "Fri Jan 07 10:03:28 GMT 2022",
        "sport_id": "1",
        "sport_name": "Football",
        "timezone": "GMT",
        "countryCode": "LK",
        "match_id": "31161595",
        "series_name": "Sri Lankan Matches",
        "match_name": "Renown SC v Up Country Lions SC",
        "series_id": "12083220"
      }
    },
    {
      "marketCount": 14,
      "event": {
        "open_date": "Fri Jan 07 10:29:49 GMT 2022",
        "sport_id": "1",
        "sport_name": "Football",
        "timezone": "GMT",
        "countryCode": "IL",
        "match_id": "31163067",
        "series_name": "Israeli Liga Bet",
        "match_name": "Beitar Kfar Saba Shlomi v Beitar Petah Tikva",
        "series_id": "12201049"
      }
    },
    {
      "marketCount": 19,
      "event": {
        "open_date": "Fri Jan 07 11:00:06 GMT 2022",
        "sport_id": "1",
        "sport_name": "Football",
        "timezone": "GMT",
        "countryCode": "NP",
        "match_id": "31161658",
        "series_name": "Nepalese Matches",
        "match_name": "Armed Police Force v Jawalakhel Youth Club",
        "series_id": "12277166"
      }
    },
    {
      "marketCount": 14,
      "event": {
        "open_date": "Fri Jan 07 10:02:32 GMT 2022",
        "sport_id": "1",
        "sport_name": "Football",
        "timezone": "GMT",
        "countryCode": "LK",
        "match_id": "31161593",
        "series_name": "Sri Lankan Matches",
        "match_name": "Ratnam SC v Sea Hawks FC",
        "series_id": "12083220"
      }
    },
    {
      "marketCount": 14,
      "event": {
        "open_date": "Fri Jan 07 10:02:36 GMT 2022",
        "sport_id": "1",
        "sport_name": "Football",
        "timezone": "GMT",
        "countryCode": "IL",
        "match_id": "31163064",
        "series_name": "Israeli Liga Bet",
        "match_name": "Beitar Ironi Kiryat Gat v Maccabi Kiryat Malakhi",
        "series_id": "12201049"
      }
    },
    {
      "marketCount": 13,
      "event": {
        "open_date": "Fri Jan 07 10:32:10 GMT 2022",
        "sport_id": "1",
        "sport_name": "Football",
        "timezone": "GMT",
        "countryCode": "IL",
        "match_id": "31161503",
        "series_name": "Israeli Liga Bet",
        "match_name": "Maccabi Beer Sheva v MS Hapoel Lod",
        "series_id": "12201049"
      }
    },
    {
      "marketCount": 19,
      "event": {
        "open_date": "Fri Jan 07 11:15:00 GMT 2022",
        "sport_id": "1",
        "sport_name": "Football",
        "timezone": "GMT",
        "countryCode": "IL",
        "match_id": "31161872",
        "series_name": "Israeli Liga Alef",
        "match_name": "Ironi Kuseife v Hapoel Marmorek",
        "series_id": "5618479"
      }
    },
    {
      "marketCount": 17,
      "event": {
        "open_date": "Fri Jan 07 11:16:23 GMT 2022",
        "sport_id": "1",
        "sport_name": "Football",
        "timezone": "GMT",
        "countryCode": "IL",
        "match_id": "31162064",
        "series_name": "Israeli Liga Alef",
        "match_name": "Hapoel Migdal Haemek v MS Tira",
        "series_id": "5618479"
      }
    },
    {
      "marketCount": 12,
      "event": {
        "open_date": "Fri Jan 07 11:29:38 GMT 2022",
        "sport_id": "1",
        "sport_name": "Football",
        "timezone": "GMT",
        "countryCode": "IL",
        "match_id": "31163062",
        "series_name": "Israeli Liga Bet",
        "match_name": "MS Bnie Jaffa Ortodoxim v Sporting Tel Aviv",
        "series_id": "12201049"
      }
    },
    {
      "marketCount": 15,
      "event": {
        "open_date": "Fri Jan 07 09:59:13 GMT 2022",
        "sport_id": "1",
        "sport_name": "Football",
        "timezone": "GMT",
        "countryCode": "IL",
        "match_id": "31160395",
        "series_name": "Israeli Liga Alef",
        "match_name": "Hapoel Iksal Imad v Ironi Nesher",
        "series_id": "5618479"
      }
    },
    {
      "marketCount": 8,
      "event": {
        "open_date": "Fri Jan 07 09:59:17 GMT 2022",
        "sport_id": "1",
        "sport_name": "Football",
        "timezone": "GMT",
        "countryCode": "IL",
        "match_id": "31160394",
        "series_name": "Israeli Liga Alef",
        "match_name": "AS Nordia Jerusalem v Shimshon Tel Aviv",
        "series_id": "5618479"
      }
    },
    {
      "marketCount": 11,
      "event": {
        "open_date": "Fri Jan 07 09:59:39 GMT 2022",
        "sport_id": "1",
        "sport_name": "Football",
        "timezone": "GMT",
        "countryCode": "IL",
        "match_id": "31160393",
        "series_name": "Israeli Liga Alef",
        "match_name": "Hapoel Bikat Hayarden v Hapoel Azor",
        "series_id": "5618479"
      }
    },
    {
      "marketCount": 13,
      "event": {
        "open_date": "Fri Jan 07 10:44:56 GMT 2022",
        "sport_id": "1",
        "sport_name": "Football",
        "timezone": "GMT",
        "countryCode": "IL",
        "match_id": "31162063",
        "series_name": "Israeli Liga Alef",
        "match_name": "Maccabi Herzliya v Maccabi Kabilio Jaffa",
        "series_id": "5618479"
      }
    },
    {
      "marketCount": 19,
      "event": {
        "open_date": "Fri Jan 07 11:00:35 GMT 2022",
        "sport_id": "1",
        "sport_name": "Football",
        "timezone": "GMT",
        "countryCode": "IL",
        "match_id": "31162286",
        "series_name": "Israeli Liga Bet",
        "match_name": "Ironi Beit Dagan v Hapoel Mahane Yehuda",
        "series_id": "12201049"
      }
    },
    {
      "marketCount": 15,
      "event": {
        "open_date": "Fri Jan 07 10:53:12 GMT 2022",
        "sport_id": "1",
        "sport_name": "Football",
        "timezone": "GMT",
        "countryCode": "IL",
        "match_id": "31162061",
        "series_name": "Israeli Liga Alef",
        "match_name": "Maccabi Yavne v Shimshon Kfar Qasem",
        "series_id": "5618479"
      }
    },
    {
      "marketCount": 10,
      "event": {
        "open_date": "Fri Jan 07 10:30:19 GMT 2022",
        "sport_id": "1",
        "sport_name": "Football",
        "timezone": "GMT",
        "countryCode": "IL",
        "match_id": "31162060",
        "series_name": "Israeli Liga Alef",
        "match_name": "Maccabi Shaaraim v SC Dimona",
        "series_id": "5618479"
      }
    },
    {
      "marketCount": 15,
      "event": {
        "open_date": "Fri Jan 07 11:22:38 GMT 2022",
        "sport_id": "1",
        "sport_name": "Football",
        "timezone": "GMT",
        "countryCode": "IL",
        "match_id": "31161676",
        "series_name": "Israeli U19",
        "match_name": "Hapoel Petach Tikva U19 v Maccabi Yavne U19",
        "series_id": "11709225"
      }
    },
    {
      "marketCount": 19,
      "event": {
        "open_date": "Fri Jan 07 11:08:54 GMT 2022",
        "sport_id": "1",
        "sport_name": "Football",
        "timezone": "GMT",
        "countryCode": "IL",
        "match_id": "31161504",
        "series_name": "Israeli Liga Alef",
        "match_name": "Hapoel Tzafririm Holon v FC Hapoel Ashkelon",
        "series_id": "5618479"
      }
    }
  ],
  "success": true,
  "message": "Match List"
}

app.controller(
  "soccerController",
  function ($scope, $http, $cookieStore, $interval, $rootScope) {
    $rootScope.isCasinoPage = false;
    $("#tabMenu li a").removeClass("select");
    if (!$('a[href="#!Soccer"]').hasClass("select")) {
      $('a[href="#!Soccer"]').addClass("select");
      $rootScope.inplaydiv = false;
      $rootScope.mainfooter = false;
      if ($rootScope.sportsData) {
        $rootScope.TournamentList("1", "Soccer");
      }
    }

    $("#loading_page").css("display", "grid");

    $scope.Highlightlist = [];
    $scope.oldHighlightlist = [];
    $scope.showsoccerinter = false;
    $rootScope.s_id = "1";
    $rootScope.fType = 1
    $scope.showsoccer = function () {
      $rootScope.getMatchDataFromWebSocket();
      $(".btn-lay").removeClass("spark");
      $(".btn-back").removeClass("spark");
      if ($scope.showsoccerinter == false) {
        $scope.showsoccerinter = true;
      }
      if ($rootScope.fType == 1) {
        // $http({
        //   url:
        //     "http://www.lcexchanges247.com/Client/BetClient.svc/Data/Highlights?sid=" +
        //     1,

        //   method: "GET",

        //   headers: {
        //     Token: authtoken,
        //   },
        // }).then(
        // function mySuccess(response) {
        $("#loading_page").css("display", "none");
        $scope.showsoccerinter = false;
        // console.log(response);
        // $scope.cricket = response.data.data;

        if (SoccerMocData.data.length < 1) {
          $scope.shoNoEvents = true;
        } else {
          $scope.shoNoEvents = false;
        }
        $scope.Highlightlist = SoccerMocData.data;

        if ($scope.oldHighlightlist.length != $scope.Highlightlist.length) {
          $scope.oldHighlightlist = $scope.Highlightlist;
        }

        angular.forEach($scope.Highlightlist, function (item, index) {
          if (item.matchName == $scope.oldHighlightlist[index].matchName) {
            if (
              item.runner1Back != $scope.oldHighlightlist[index].runner1Back
            ) {
              $("#hback1_" + index).addClass("spark");
            }
            if (
              item.runner1Lay != $scope.oldHighlightlist[index].runner1Lay
            ) {
              $("#hlay1_" + index).addClass("spark");
            }
            if (
              item.runner2Back != $scope.oldHighlightlist[index].runner2Back
            ) {
              $("#hback2_" + index).addClass("spark");
            }
            if (
              item.runner2Lay != $scope.oldHighlightlist[index].runner2Lay
            ) {
              $("#hlay2_" + index).addClass("spark");
            }
            if (
              item.runner3Back != $scope.oldHighlightlist[index].runner3Back
            ) {
              $("#hback3_" + index).addClass("spark");
            }
            if (
              item.runner3Lay != $scope.oldHighlightlist[index].runner3Lay
            ) {
              $("#hlay3_" + index).addClass("spark");
            }
            if (item.bfId == $scope.oldHighlightlist[index].bfId) {
              // console.log(item.bfId)
            }
            if (item.marketId == $scope.oldHighlightlist[index].marketId) {
              // console.log(item.marketId)
            }
            if (item.mtBfId == $scope.oldHighlightlist[index].mtBfId) {
              // console.log(item.mtBfId)
            }
          }
        });
        $scope.oldHighlightlist = $scope.Highlightlist;

        // console.log($scope.cricket)
        // },
        //   function myError(error) {
        //     $scope.showsoccerinter = false;
        //     if (error.status == 401) {
        //       // $.removeCookie("authtoken");
        //       // window.location.href="index.html"
        //     }
        //   }
        // );
      } else {
        $("#loading_page").css("display", "none");
        $scope.showsoccerinter = false;
        // console.log(response);
        // $scope.cricket = response.data.data;

        $scope.Highlightlist = $rootScope.highlightwisedata(1);
        if ($scope.Highlightlist.length < 1) {
          $scope.shoNoEvents = true;
        } else {
          $scope.shoNoEvents = false;
        }

        if ($scope.oldHighlightlist.length != $scope.Highlightlist.length) {
          $scope.oldHighlightlist = $scope.Highlightlist;
          $("#tabMenu li a").removeClass("select");
          if (!$('a[href="#!Soccer"]').hasClass("select")) {
            $('a[href="#!Soccer"]').addClass("select");
            $rootScope.inplaydiv = false;
            $rootScope.mainfooter = false;
            if ($rootScope.sportsData) {
              $rootScope.TournamentList("1", "Soccer");
            }
          }
        }

        angular.forEach($scope.Highlightlist, function (item, index) {
          if (item.matchName == $scope.oldHighlightlist[index].matchName) {
            if (
              item.runner1Back != $scope.oldHighlightlist[index].runner1Back
            ) {
              $("#hback1_" + index).addClass("spark");
            }
            if (item.runner1Lay != $scope.oldHighlightlist[index].runner1Lay) {
              $("#hlay1_" + index).addClass("spark");
            }
            if (
              item.runner2Back != $scope.oldHighlightlist[index].runner2Back
            ) {
              $("#hback2_" + index).addClass("spark");
            }
            if (item.runner2Lay != $scope.oldHighlightlist[index].runner2Lay) {
              $("#hlay2_" + index).addClass("spark");
            }
            if (
              item.runner3Back != $scope.oldHighlightlist[index].runner3Back
            ) {
              $("#hback3_" + index).addClass("spark");
            }
            if (item.runner3Lay != $scope.oldHighlightlist[index].runner3Lay) {
              $("#hlay3_" + index).addClass("spark");
            }
            if (item.bfId == $scope.oldHighlightlist[index].bfId) {
              // console.log(item.bfId)
            }
            if (item.marketId == $scope.oldHighlightlist[index].marketId) {
              // console.log(item.marketId)
            }
            if (item.mtBfId == $scope.oldHighlightlist[index].mtBfId) {
              // console.log(item.mtBfId)
            }
          }
        });
        $scope.oldHighlightlist = $scope.Highlightlist;
      }
    };

    var highlightTimer;
    if ($rootScope.authcookie) {
      var highlightTimer1 = $interval(() => {
        if (!$scope.Highlightlist.length) {
          $scope.Highlightlist = $rootScope.highlightwisedata(1);
        } else {
          $interval.cancel(highlightTimer1);
        }
      }, 500);
      highlightTimer = $interval(function () {
        $scope.showsoccer();
      }, 10000);
    } else {
      highlightTimer = $interval(function () {
        $scope.showsoccer();
      }, 1000 * 60);
      var highlightTimer1 = $interval(() => {
        if (!$scope.Highlightlist.length) {
          $scope.showsoccer();
        } else {
          $interval.cancel(highlightTimer1);
        }
      }, 1000);
    }

    $scope.$on("$destroy", function () {
      $interval.cancel(highlightTimer);
    });
  }
);
